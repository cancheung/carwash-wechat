<template>
  <div class="spread-detail">

    <div class="spread-detail__agreement">
      <x-button mini plain link="/spread/agreement">推广员协议</x-button>
    </div>

    <p class="spread-detail__text spread-detail__text__name">欢迎您，<b>{{info.name}}</b></p>

    <countup
      :start-val="0"
      :duration="1"
      :decimals="2"
      :end-val="+info.award_amount"
      class="spread-detail__text spread-detail__text__price"
    />

    <p class="spread-detail__text spread-detail__text__tips">奖励金额 ( 元 )</p>


    <div class="spread-detail__text spread-detail__text__box">
      <flexbox :gutter="0">
        <flexbox-item>注册人数<br><b>{{info.spread_num}}</b></flexbox-item>
        <flexbox-item>充值金额（元）<br><b>{{info.recharge_amount}}</b></flexbox-item>
        <flexbox-item>充值人数<br><b>{{info.recharge_num}}</b></flexbox-item>
      </flexbox>
    </div>

    <!-- 按钮组 -->
    <div class="spread-detail__btns">

      <!-- 提现 -->
      <x-button class="car-btn car-btn__yellow car-btn--radius spread-detail__btns__margin"  @click.native="beforeReflect()">
        <svg class="svg-icon" width="22px" height="22px" viewBox="0 0 1024 1024">
          <path d="M549.30946 967.424993C549.30946 956.571974 549.084283 945.492853 549.30946 934.639835 549.759816 926.047863 547.282903 923.334609 537.825649 924.012923 335.395342 935.318149 149.627812 812.769491 79.599084 622.16337-18.125895 355.133918 146.025048 62.328546 423.888241 8.515669 676.532081-40.322912 920.394178 125.86392 964.97838 380.005415 990.422917 524.938421 953.494569 654.496318 858.47167 767.096375 854.418555 771.844571 851.040973 777.497184 847.213035 782.471484 832.126464 803.046996 803.529523 806.212461 784.614994 789.706828 765.475328 772.975094 764.574617 744.485923 782.813614 726.623664 841.583718 668.967009 875.584798 598.422395 886.618255 517.476973 905.082429 382.266461 863.650652 267.179254 762.773238 175.833023 682.161398 102.575154 585.337098 70.92052 476.80383 81.095224 302.294946 97.374749 165.840251 224.897707 135.441928 397.867674 99.63946 601.135649 238.571055 800.333742 441.676882 836.962677 471.850045 842.389187 502.023188 844.424127 532.421509 843.067499 548.183593 842.389185 548.859126 841.258664 548.633948 825.205242 548.408771 808.247401 547.733258 791.289561 547.958436 774.33172 548.408771 746.068654 563.72052 737.702787 587.363656 752.85179 628.570276 779.532124 667.975516 809.377923 707.155579 838.997617 715.03661 844.876335 721.791795 852.11168 726.070088 861.155861 734.401474 878.339805 732.825272 894.619333 720.665928 909.768335 705.804534 928.535011 686.214513 942.327388 667.525161 956.571974 641.179955 976.695276 614.159217 995.461954 587.363656 1014.906943 585.787453 1016.037466 584.211251 1016.941883 582.635028 1017.846301 574.979154 1021.916185 567.098122 1026.890482 558.31638 1021.916185 549.534638 1016.941883 549.759816 1007.671597 549.534638 998.853521 549.30946 988.226609 549.534638 977.8258 549.534638 967.198886 549.534638 967.424993 549.30946 967.424993 549.30946 967.424993L549.30946 967.424993ZM463.84343 577.764031C469.578117 577.764031 471.62622 576.085687 471.62622 570.001685 471.421399 544.197131 471.421399 518.182785 471.83102 492.378231 472.03584 484.406092 467.939635 484.196299 462.204949 484.406092 425.953546 484.825678 391.164375 490.666668 353.655542 490.666668 322.674135 490.666668 308.187679 464.265952 317.813758 434.265537 320.476291 426.293398 323.958065 418.740847 329.078319 412.027466 335.837055 403.216155 343.824652 398.8105 355.294024 399.020293 391.135806 399.649672 426.977587 399.020293 462.819369 399.439879 469.987738 399.439879 471.62622 397.341948 472.24064 389.999188 473.879122 373.215738 468.758876 360.628151 457.084682 348.250358 425.339105 314.683458 394.82239 279.438214 364.100854 244.82235 351.197819 230.346624 341.98136 214.192555 348.125665 193.632828 353.245921 176.429792 367.377818 168.038069 384.581878 171.394759 400.352256 174.541655 412.845691 182.93338 423.700623 194.681795 452.169237 225.731177 481.047491 256.570766 509.311283 287.829939 514.431549 293.494352 516.889272 294.123733 522.623959 288.45932 556.008018 255.312006 589.801697 222.794073 623.595377 190.27614 635.47437 178.737517 649.196646 171.394759 666.400706 175.590622 690.773115 181.464828 700.604006 206.640004 686.88173 227.829109 683.195146 233.703316 678.484521 238.948144 673.773875 243.983178 637.522473 282.585113 601.680691 321.396839 564.814848 359.369395 554.164715 370.488429 558.875361 382.866224 558.670541 394.824432 558.465741 399.649674 564.610048 397.971329 568.091812 397.971329 601.885491 398.181122 635.67917 397.971329 669.47287 397.971329 695.688561 397.971329 716.784025 418.740847 717.808066 445.594366 718.627307 466.993265 705.929073 482.308164 684.833628 482.937543 646.534123 483.986508 608.439419 484.196301 570.139914 483.986508 560.923464 483.986508 557.8513 486.294233 558.05612 496.15451 558.670541 519.861132 558.26092 543.777549 557.8513 567.484171 557.6465 574.82693 559.694602 577.134654 566.86295 577.134654 600.042209 576.715068 633.016648 576.924861 666.195906 576.924861 670.292111 576.924861 674.388296 576.924861 678.4845 577.134654 694.050079 577.973826 707.362754 583.218653 714.121482 598.953138 720.88023 615.107207 718.627307 630.422106 708.591616 644.478245 701.423247 654.548314 691.797176 658.95397 679.508562 658.95397 642.233098 658.744177 605.162455 659.163763 567.887012 658.744177 558.875361 658.534382 555.803197 660.632314 556.827259 670.49259 558.05612 681.192041 557.6465 692.101282 557.441679 703.010523 557.032059 727.556319 539.418378 746.018114 516.479652 746.647493 490.878362 747.276874 473.674322 732.381561 471.62622 706.577007 470.602158 693.779626 470.397358 680.772455 470.602158 667.765281 470.806979 660.632314 468.349256 658.95397 461.795328 658.95397 424.315064 659.163763 386.62998 659.163763 349.149715 659.163763 326.006164 659.163763 308.597297 641.331348 308.392487 617.414933 308.187675 594.967069 325.596543 577.764033 348.535284 577.55424 367.582638 577.554238 386.01556 577.554238 404.448461 577.554238 424.315064 577.554238 443.976847 577.344443 463.84343 577.764031Z" fill="#fff" />
        </svg>
        奖励金额提现
      </x-button>

      <flexbox :gutter="26">
        <flexbox-item>
          <x-button class="car-btn car-btn__blue car-btn--radius" link="/spread/record">
            <svg class="svg-icon" width="22px" height="22px" viewBox="0 0 1024 1024">
              <path d="M158.983468 70.62069C120.00535 70.62069 88.275862 102.115222 88.275862 141.080964L88.275862 953.539725C88.275862 992.54242 119.980085 1024 158.983468 1024L865.016532 1024C903.99465 1024 935.724138 992.505468 935.724138 953.539725L935.724138 141.080964C935.724138 102.07827 904.019915 70.62069 865.016532 70.62069L759.172414 70.62069 794.482759 105.931034 794.482759 52.913081C794.482759 23.807011 770.796703 0 741.578417 0L282.421583 0C253.09101 0 229.517241 23.689781 229.517241 52.913081L229.517241 105.931034 264.827586 70.62069 158.983468 70.62069ZM300.137931 141.241379 300.137931 105.931034 300.137931 52.913081C300.137931 62.615111 292.171564 70.62069 282.421583 70.62069L741.578417 70.62069C731.713218 70.62069 723.862069 62.729446 723.862069 52.913081L723.862069 105.931034 723.862069 141.241379 759.172414 141.241379 865.016532 141.241379C865.140118 141.241379 865.103448 953.539725 865.103448 953.539725 865.103448 953.384748 158.983468 953.37931 158.983468 953.37931 158.859882 953.37931 158.896552 141.080964 158.896552 141.080964 158.896552 141.235942 264.827586 141.241379 264.827586 141.241379L300.137931 141.241379ZM723.862069 158.948988C723.862069 149.246958 731.828436 141.241379 741.578417 141.241379L282.421583 141.241379C292.286782 141.241379 300.137931 149.132623 300.137931 158.948988L300.137931 105.931034C300.137931 86.429678 284.328942 70.62069 264.827586 70.62069 245.32623 70.62069 229.517241 86.429678 229.517241 105.931034L229.517241 158.948988C229.517241 188.055058 253.203297 211.862069 282.421583 211.862069L741.578417 211.862069C770.90899 211.862069 794.482759 188.172288 794.482759 158.948988L794.482759 105.931034C794.482759 86.429678 778.67377 70.62069 759.172414 70.62069 739.671058 70.62069 723.862069 86.429678 723.862069 105.931034L723.862069 158.948988ZM723.862069 441.37931C743.363425 441.37931 759.172414 425.570322 759.172414 406.068966 759.172414 386.567609 743.363425 370.758621 723.862069 370.758621L300.137931 370.758621C280.636575 370.758621 264.827586 386.567609 264.827586 406.068966 264.827586 425.570322 280.636575 441.37931 300.137931 441.37931L723.862069 441.37931ZM300.137931 547.310345C280.636575 547.310345 264.827586 563.119334 264.827586 582.62069 264.827586 602.122046 280.636575 617.931034 300.137931 617.931034L723.862069 617.931034C743.363425 617.931034 759.172414 602.122046 759.172414 582.62069 759.172414 563.119334 743.363425 547.310345 723.862069 547.310345L300.137931 547.310345ZM300.137931 723.862069C280.636575 723.862069 264.827586 739.671058 264.827586 759.172414 264.827586 778.67377 280.636575 794.482759 300.137931 794.482759L582.62069 794.482759C602.122046 794.482759 617.931034 778.67377 617.931034 759.172414 617.931034 739.671058 602.122046 723.862069 582.62069 723.862069L300.137931 723.862069Z" fill="#fff" />
            </svg>
            交易记录
          </x-button>
        </flexbox-item>
        <flexbox-item>
          <x-button class="car-btn car-btn__blue car-btn--radius" @click.native="goToQrcode">
            <svg class="svg-icon" width="22px" height="22px" viewBox="0 0 1024 1024">
              <path d="M62.996776 484.061694l423.162696 0L486.159472 60.900022 62.996776 60.900022 62.996776 484.061694zM168.788218 166.69044l211.580836 0 0 211.580836L168.788218 378.271276 168.788218 166.69044zM539.055193 60.900022l0 423.162696 423.162696 0L962.217888 60.900022 539.055193 60.900022zM856.426447 378.271276 644.845611 378.271276 644.845611 166.69044l211.580836 0L856.426447 378.271276zM221.682915 325.376579l105.790418 0L327.473333 219.585137 221.682915 219.585137 221.682915 325.376579zM62.996776 960.120111l423.162696 0L486.159472 536.957415 62.996776 536.957415 62.996776 960.120111zM168.788218 642.747833l211.580836 0 0 211.580836L168.788218 854.328669 168.788218 642.747833zM803.531749 219.585137 697.740308 219.585137l0 105.790418 105.790418 0L803.530726 219.585137zM539.055193 960.120111l105.790418 0L644.845611 854.329692 539.055193 854.329692 539.055193 960.120111zM644.845611 642.747833l0 211.580836 105.790418 0L750.636029 642.747833 644.845611 642.747833zM856.426447 854.329692 750.636029 854.329692 750.636029 960.120111l211.580836 0L962.216865 748.538251 856.426447 748.538251 856.426447 854.329692zM856.426447 642.747833l105.790418 0L962.216865 536.957415 856.426447 536.957415 856.426447 642.747833zM539.055193 536.957415l0 105.790418 105.790418 0L644.845611 536.957415 539.055193 536.957415zM221.682915 801.433972l105.790418 0L327.473333 695.643554 221.682915 695.643554 221.682915 801.433972z" fill="#fff" />
            </svg>
            推荐二维码
          </x-button>
        </flexbox-item>
      </flexbox>
    </div>
  </div>
</template>

<script>
/**
 * 首页
 * @author zml
 * @version 2017-07-25
 */

import { Countup, XButton, Flexbox, FlexboxItem } from 'vux';

export default {

  name: 'app-spread-detail',

  components: {
    Countup,
    XButton,
    Flexbox,
    FlexboxItem,
  },

  props: {
    tel: {
      type: String,
      required: true,
    },
    info: {
      type: Object,
      required: true,
    },
  },

  data() {
    return {
    };
  },

  computed: {
    hostName() { // 域名
      return window.location.href.split('#')[0];
    },
  },

  methods: {
    // 前往二维码专属页面
    goToQrcode() {
      this.$router.push(`/spread/qrcode?invite_code=${this.info.invite_code}&name=${this.info.name}`);
    },

    // 提现之前用户状态判断
    beforeReflect() {
      const status = +this.info.spread_status;

      switch (status) {
        case 0:
          this.$router.push('/spread/apply');
          this.$vux.toast.text('提现前请先填写资料', 'top');
          break;
        case 2:
          this.$router.push('/spread/reflect');
          break;
        default:
          this.$router.push('/spread/result');
          break;
      }
    },
  },

  created() {
  },

};

</script>

<style lang="less">
  .spread-detail {
    position: relative;
    height: 100vh;
    background-image: url('../../assets/bg.png');
    background-size: 100% auto;

    &__agreement {
      position: absolute;
      right: 10px;
      top:10px;

      .weui-btn {
        font-size: 12px;
        padding: 0 1em;
        color: #fff;
        border-color: #fff;
        line-height: 2.1;

        &:not(.weui-btn_plain-disabled):active {
          background-color: transparent;
          color: #fff;
          border-color: #fff;
        }
      }
    }

    &__btns {
      position: absolute;
      width: calc(~"100% - 30px");
      bottom: 6%;
      left: 15px;

      &__margin {
        margin-bottom: 26px;
      }
    }

    &__text {
      position: absolute;
      width: 100%;
      text-align: center;
      color: #fff;
      font-size: 15px;
      line-height: 1;

      &__name {
        top: 60px;
      }

      &__price {
        font-family: 'Source Sans Pro', Helvetica, Arial, sans-serif;
        top: 90px;
        font-size: 50px;
      }

      &__tips {
        top: 145px;
      }

      &__box {
        top: 210px;

        .vux-flexbox-item {
          text-align: center;
          line-height: 1.75;

          b {
            font-family: 'Source Sans Pro', Helvetica, Arial, sans-serif;
            font-size: 20px;
          }
        }
      }
    }
  }

</style>
